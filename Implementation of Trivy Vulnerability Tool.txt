
***********Trivy Vulnerability Scanner

Trivy can be used to scan the following 
* Container image 
* Git repository 
* filesystem/folder 
* Virtual machine 
* Kubernetes cluster 
* AWS 


Trivy will look out to solve issues in the for the following;
* Os packages and software dependencies in use(SBOM)
* Known vulnerabilities (CVEs)
* IaC issues and misconfigurations
* Sensitive information and secrets
* Software licences


Installation and Confiugration

* Create Ubuntu VM
* Login to the VM

**Install Docker**

* sudo apt-get update -y
* sudo apt-get install docker.io -y
* service docker restart
* sudo usermod -aG docker $USER
* newgrp docker 



---INSTALLATION STEPS---

sudo apt-get install wget apt-transport-https gnupg lsb-release

wget -qO - https://aquasecurity.github.io/trivy-repo/deb/public.key | gpg --dearmor | sudo tee /usr/share/keyrings/trivy.gpg > /dev/null

echo "deb [signed-by=/usr/share/keyrings/trivy.gpg] https://aquasecurity.github.io/trivy-repo/deb $(lsb_release -sc) main" | sudo tee -a /etc/apt/sources.list.d/trivy.list

sudo apt-get update

sudo apt-get install trivy




---COMMANDS---

***** To scan any images USE     --- trivy image imagename after pulling the image

example; docker pull nginx
	 trivy image nginx


***** To scan Kubernetes yaml file/repo

* create a directory
* clone your repo of the yml file
* use trivy fs --security-checks vuln,config kubeturb "folder-name/ or path"


***** To scan an image for extensive result with an output

"-f json" means the format should be json format
"-o results.json" means the output should be saved in results.json location


$trivy image -f json -o results.json nginx

$trivy image --severity HIGH,CRITICAL image_name



***** To scan Kubernetes cluster

* install Kubernetes

$trivy k8s --report summary cluster 



**** To Scan a Repository of any VCS

$trivy repo repo-url












